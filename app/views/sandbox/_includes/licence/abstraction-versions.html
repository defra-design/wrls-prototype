{% set versions = [] %}

{% for changeLog in data.licences[data.ID]['changeLog'] %}
{% if changeLog.endDate %}{% set endDate = changeLog.endDate|govukDate%}{% endif %}
{% set versions = versions | push([{text:changeLog.startDate|govukDate},{text:endDate},{text:changeLog.reasonCreated|capitalize},{text:changeLog.changeType|capitalize},{html:'<a class="govuk-link" href="licence-version?versionID='+loop.index0+'">View</a>'}])%}
{% endfor %}

{{ govukTable({
  caption: "Showing all licence versions imported into the service.",
  captionClasses: "govuk-table__caption--m govuk-!-font-weight-regular",
  firstCellIsHeader: false,
  head: [
    {
      text: "Start date"
    },
    {
      text: "End date"
    },
    {
      text: "Reason"
    },
    {
      text: "Change type"
    },
    {
      text: "Action"
    }
  ],
  rows: versions
}) }}